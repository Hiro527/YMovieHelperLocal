# ARCHITECTURE

This is the specification for YMovieHelper. Please follow the Installation below to build and work with the environment.

## Directory Structure

### Backend

This project uses golang. The directory structure and its overview are shown below.

```:plain.txt
/YMovieHelper
├── models/            --> Application Models.(Models of MVC.)
├── repository/        --> This directory is for writing code related to the data store, such as connecting to the database, executing queries, etc.
├── controllers/       --> Application Controllers.(Controllers of MVC.)
│   ├── handlers/      -->  This is the directory where handle functions are written.
│   ├── middlewares/   --> This is the directory where middlewares are written.
│   └── routes/        --> Write code to route handle functions.
├── docs/              --> API documentation by Swagger is automatically generated from the comments. (The developer does not have to tinker with the internals.)
├── scripts/           --> Scripts for building, installing, analysis, etc.
├── build/
│   └── ci/            --> CI (Continuous Integration) and build scripts or configurations.
├── main.go            --> Application entrypoint (main function).
├── go.mod             --> Defines the module’s module path, which is also the import path used for the root directory.
└── go.sum             --> Contains the expected cryptographic checksums of the content of specific module versions.
```

### Frontend

This project uses React/Next.js (TypeScript) and MUI v5 as the UI framework. Also note that firebase is used for authentication and authorization.

The directory structure does not deviate much from the standard structure defined by Next.js, so there should be no confusion. Note, however, only that the src directory is used for development.

```:plain.txt
/MyNextJsApp
├── public/               --> Static files like images, fonts, etc. (Accessible from the browser)
│   └── etc...
├── src/                  --> Main source code directory.
│   ├── components/       --> Reusable React components.
│   ├── pages/            --> Routing is based on the file structure in this directory. Each file corresponds to a route.
│   │   ├── _app.tsx      --> Overwrite the default App component, add global styles, etc.
│   │   └── index.tsx     --> Home page (route '/').
│   ├── styles/           --> Global styles or variables.
│   ├── libs/             --> Library code (e.g. for API calls).
│   ├── contexts/         --> React context providers.
│   ├── hooks/            --> Custom React hooks.
│   ├── layouts/          --> Layout components used across multiple pages.
│   ├── theme.tsx         --> Theme configuration for styled-components or similar libraries.
│   ├── middleware.tsx    --> Middleware for server-side rendering or serverless functions.
│   └── utils/            --> Utility functions.
├── scripts/              --> Scripts for building, installing, analysis, etc.
├── .next/                --> Auto-generated by Next.js for production build.
├── node_modules/         --> Node.js dependencies.
├── .gitignore            --> Specifies which files and directories Git should ignore.
├── package.json          --> Project metadata and dependencies.
├── package-lock.json     --> Exact dependency tree for your project.
├── tsconfig.json         --> Configuration for TypeScript.
└── README.md             --> Project documentation.
```

## Setting Up the Development Environment

### Requirement

- Git
- VSCode
- Dev Containers (VSCode Extension)

1. execute the following command in the project directory

   ```bash
   git clone https://github.com/itkmaingit/YMovieHelper.git
   ```

2. This project is a 3-tier architecture and consists of the following overview diagram.To edit the frontend and backend (API) in VSCode, open a window with the following steps: (If you want to edit only one of the services, you may not need the other one.)

   1. Press F1 in VSCode and Select "Open Folder in Container".
   1. Select "YMovieHelper/api" or "YMovieHelper/frontend".
   1. Maybe a new window opens and leaves in the container environment of the selected folder.
   1. Press Ctrl+Shift+N, further press F1 in VSCode and Select "Open Folder in Container". Follow the same procedure as before to enter the other container.

3. Collect dependent packages within each container.

   > In api container, all you have need to do is to execute command in below.
   > ```
   > make init
   > ```
   > go run main.go fails because no environment variables are set. Ask the administrator for the environment variables.

   > In the frontend container, simply execute the following commands.
   > ```
   > sudo npm install
   > ```
   > Note that the owner of node_modules is root, so sudo privileges are required.
   > As with the api container, running `npm run dev` will generate an error because the environment variable is not set. Ask the administrator for the environment variables.
